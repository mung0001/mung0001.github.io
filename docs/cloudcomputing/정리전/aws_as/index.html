<!DOCTYPE html>
<html lang="en">

<head>
  <script data-ad-client="ca-pub-1022327295984162" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Auto Scaling  Auto Scaling  EC2 인스턴스를 자동으로 시작하거나 종료하여 애플리케이션 로드를 처리하기에 적절한 수의 EC를 유지할 수 있도록 하는 서비스 사용자가 정의하는 조건에 따라 EC2 개수를 자동으로 확장 또는 축소가 가능 모니터링을 통해 비정상 인스턴스를 탐지하고 교체할 수 있음 수요가 급증할 경우 EC2 수를 자동으로 늘려 성능을 유지하고 수요가 적을 경우 수를 줄여 비용을 절감 ELB의 대상그룹을 Auto Scaling Group( ASG )에 포함시켜 자동생성된 EC2로 하여금 트래픽 부하분산을 하도록 설정가능 수요 변화가 예측 나응한 경우 예약된 일정을 통해 정해싲 시간에 늘리거나 줄이도록 설정이 가능 ASG 내 손상된 인스턴스가 발견될 경우, Auto Scaling은 이를 자동으로 종료하고 새로운 인스턴스로 교체  ELB를 사용하는 경우, ELB가 손상된 인스턴스를 트래픽 요청 대상에서 분리시킨 후, Auto Scaling이 이를 새로운 인스턴스로 교체   비정상 서버 탐지 후 Auto Scaling이 새로운 인스턴스를 In Service 상태를 만들기까지 5분 이내 소요   AWS Auto Scaling 그룹."><meta property="og:title" content="AWS AutoScaling" />
<meta property="og:description" content="Auto Scaling  Auto Scaling  EC2 인스턴스를 자동으로 시작하거나 종료하여 애플리케이션 로드를 처리하기에 적절한 수의 EC를 유지할 수 있도록 하는 서비스 사용자가 정의하는 조건에 따라 EC2 개수를 자동으로 확장 또는 축소가 가능 모니터링을 통해 비정상 인스턴스를 탐지하고 교체할 수 있음 수요가 급증할 경우 EC2 수를 자동으로 늘려 성능을 유지하고 수요가 적을 경우 수를 줄여 비용을 절감 ELB의 대상그룹을 Auto Scaling Group( ASG )에 포함시켜 자동생성된 EC2로 하여금 트래픽 부하분산을 하도록 설정가능 수요 변화가 예측 나응한 경우 예약된 일정을 통해 정해싲 시간에 늘리거나 줄이도록 설정이 가능 ASG 내 손상된 인스턴스가 발견될 경우, Auto Scaling은 이를 자동으로 종료하고 새로운 인스턴스로 교체  ELB를 사용하는 경우, ELB가 손상된 인스턴스를 트래픽 요청 대상에서 분리시킨 후, Auto Scaling이 이를 새로운 인스턴스로 교체   비정상 서버 탐지 후 Auto Scaling이 새로운 인스턴스를 In Service 상태를 만들기까지 5분 이내 소요   AWS Auto Scaling 그룹." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mung0001.github.io/docs/cloudcomputing/%EC%A0%95%EB%A6%AC%EC%A0%84/aws_as/" />


<title>뭉게뭉게</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.63eb88daa545365405ecdbb21033286a325c60a36cfa6d22d21e7c3bc9286941.css" integrity="sha256-Y&#43;uI2qVFNlQF7NuyEDMoajJcYKNs&#43;m0i0h58O8koaUE=">
<script defer src="/en.search.min.6931cfa7488a1b3024697c43a5449bcdc58c9167161531a5f48444d5d769e54c.js" integrity="sha256-aTHPp0iKGzAkaXxDpUSbzcWMkWcWFTGl9IRE1ddp5Uw="></script>
<!--

-->

  
</head>

<body>
  <div class="background">
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex" style="max-width:100%;" >
    <aside style="padding: 1.5%; max-width: 90%;" class="book-menu">
      
  
<nav styles="background-color:red; position=none;">
구름이 
<h2 class="book-brand">
  <a href="/"><span>뭉게뭉게</span>
  </a>
</h2>


<img style="padding-left: 3%; padding-right: 1%;"src = "https://github.com/mung0001/source/blob/master/static/Go/Golang.jpg?raw=true" width="90%" height="13%" >
<div style="padding-top: 0.2cm; font-size: 0.9em; font-weight: bolder;">
  <div style ="padding-bottom: 0.3cm;">
    Name : Jengkeun Lee
  </div>
  <div style ="padding-bottom: 0.3cm;">
    Mail : mung0001@naver.com
  </div>
</div>

<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  

  
  




 
  
    




  
  <ul>
    
      
        

  <li class="book-section-flat" >
    

  
  <a href="/docs/cloudcomputing/" class="">CloudComputing</a>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/amazonwebservice/" class="collapsed ">Amazon Web Service</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/awstraining/" class="collapsed ">AWS Training</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/awssaa/" class="collapsed ">AWS SAA 시험정리</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/googlecloudplatform/" class="collapsed ">Google Cloud Platform</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/gcptraining/" class="collapsed ">GCP Training</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/microsoftazure/" class="collapsed ">Microsoft Azure</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/azuretraining/" class="collapsed ">Azure Training</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/openstack/" class="collapsed ">OpenStack</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/openstacktraining/" class="collapsed ">OpenStack Training</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/docker/" class="collapsed ">Docker</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/dockertraining/" class="collapsed ">Docker Training</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/%EC%A0%95%EB%A6%AC%EC%A0%84/" class="collapsed ">정리전</a>
  


    




  
  <ul>
    
      
        <li >

  
  <a href="/docs/cloudcomputing/%EC%A0%95%EB%A6%AC%EC%A0%84/aws_as/" class="active">AWS AutoScaling</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/%EC%A0%95%EB%A6%AC%EC%A0%84/test/" class="">Test</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/%EC%A0%95%EB%A6%AC%EC%A0%84/%EB%B0%B0%ED%8F%AC/" class="">배포</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/%EC%A0%95%EB%A6%AC%EC%A0%84/aws-%EA%B3%84%EC%A0%95/" class="">AWS 계정</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/%EC%A0%95%EB%A6%AC%EC%A0%84/aws%EC%9A%94%EA%B8%88/" class="">AWS 요금</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/%EC%A0%95%EB%A6%AC%EC%A0%84/basic/" class="">Base</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/%EC%A0%95%EB%A6%AC%EC%A0%84/aws_cli/" class="">AWS CLI</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/%EC%A0%95%EB%A6%AC%EC%A0%84/aws_sdk/" class="">AWS SDK</a>
  

</li>
      
    
  </ul>
  



  </li>


      
    
  </ul>
  



  </li>


      
    
      
        

  <li class="book-section-flat" >
    

  
  <a href="/docs/programing/" class="">Programing</a>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/programing/python/" class="collapsed ">Python</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/programing/shell/" class="collapsed ">Shell</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/programing/golang/" class="collapsed ">Golang</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/programing/web/" class="collapsed ">Web</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/programing/git/" class="collapsed ">Git</a>
  


    






  </li>


      
    
  </ul>
  



  </li>


      
    
      
        

  <li class="book-section-flat" >
    

  
  <a href="/docs/network/" class="">Network</a>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/network/network/" class="collapsed ">Network 기본</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/network/snort/" class="collapsed ">Snort</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/network/mail/" class="collapsed ">Mail</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/network/%EC%A0%95%EB%A6%AC%EC%A0%84/" class="collapsed ">정리전</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/network/sophos/" class="collapsed ">Sophos</a>
  


    






  </li>


      
    
  </ul>
  



  </li>


      
    
      
        

  <li class="book-section-flat" >
    

  
  <a href="/docs/system/" class="">System</a>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/system/linux/" class="collapsed ">Linux</a>
  


    






  </li>


      
    
  </ul>
  



  </li>


      
    
      
        

  <li class="book-section-flat" >
    

  
  <span>Project</span>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/project/mini/" class="collapsed ">M Ini</a>
  


    






  </li>


      
    
  </ul>
  



  </li>


      
    
  </ul>
  



  














  
<ul>
  
  <li>
    <a href="/posts/" >
        Blog
      </a>
  </li>
  
</ul>







</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div style="padding-left: 2.5%;" class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>AWS AutoScaling</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#auto-scaling-1"><strong>Auto Scaling</strong></a></li>
  </ul>

  <ul>
    <li><a href="#시작-구성-launch-configuration-"><strong>시작 구성( Launch Configuration )</strong></a></li>
  </ul>

  <ul>
    <li><a href="#조정-정책--scaling-"><strong>조정 정책 ( Scaling )</strong></a></li>
  </ul>

  <ul>
    <li><a href="#조정-휴지--scaling-cooldown-"><strong>조정 휴지 ( Scaling Cooldown )</strong></a></li>
  </ul>

  <ul>
    <li><a href="#수명주기-후크--life-cycle-hook-"><strong>수명주기 후크 ( Life Cycle Hook )</strong></a></li>
  </ul>

  <ul>
    <li><a href="#elastic-load-balancer"><strong>Elastic Load Balancer</strong></a></li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#target-group--대상-그룹-"><strong>Target Group ( 대상 그룹 )</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#각-항목에-대한-설명"><strong>각 항목에 대한 설명</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#elastic-load-balancer의-종류"><strong>Elastic Load Balancer의 종류</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#network-load-balancer--nlb-"><strong>Network Load Balancer ( NLB )</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#application-load-balancer--alb-"><strong>Application Load Balancer ( ALB )</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#classic-load-balancer--clb-"><strong>Classic Load Balancer ( CLB )</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#sticky-session"><strong>Sticky Session</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#교차영역-로드밸런싱"><strong>교차영역 로드밸런싱</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#x-forwared-for"><strong>X-Forwared-for</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#x-forwared-for-1"><strong>X-Forwared-for</strong></a></li>
      </ul>
    </li>
  </ul>
</nav>



    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="auto-scaling">Auto Scaling</h1>
<hr>
<h2 id="auto-scaling-1"><strong>Auto Scaling</strong></h2>
<p><img src="/AWS/Auto_Scaling.jpg" alt="Auto_Scaling" /></p>
<ul>
<li>EC2 인스턴스를 자동으로 시작하거나 종료하여 애플리케이션 로드를 처리하기에 적절한 수의 EC를 유지할 수 있도록 하는 서비스</li>
<li>사용자가 정의하는 조건에 따라 EC2 개수를 자동으로 확장 또는 축소가 가능</li>
<li>모니터링을 통해 비정상 인스턴스를 탐지하고 교체할 수 있음</li>
<li>수요가 급증할 경우 EC2 수를 자동으로 늘려 성능을 유지하고 수요가 적을 경우 수를 줄여 비용을 절감</li>
<li>ELB의 대상그룹을 Auto Scaling Group( ASG )에 포함시켜 자동생성된 EC2로 하여금 트래픽 부하분산을 하도록 설정가능</li>
<li>수요 변화가 예측 나응한 경우 예약된 일정을 통해 정해싲 시간에 늘리거나 줄이도록 설정이 가능</li>
<li>ASG 내 손상된 인스턴스가 발견될 경우, Auto Scaling은 이를 자동으로 종료하고 새로운 인스턴스로 교체
<ul>
<li>ELB를 사용하는 경우, ELB가 손상된 인스턴스를 트래픽 요청 대상에서 분리시킨 후, Auto Scaling이 이를 새로운 인스턴스로 교체</li>
</ul>
</li>
<li>비정상 서버 탐지 후 Auto Scaling이 새로운 인스턴스를 In Service 상태를 만들기까지 5분 이내 소요</li>
</ul>
<blockquote>
<div class="book-expand">
  <label>
    <div class="book-expand-head flex justify-between">
      <span>AWS Auto Scaling 그룹</span>
      <span>...</span>
    </div>
    <input type="checkbox" class="hidden" />
    <div class="book-expand-content markdown-inner">
      <h2 id="aws-auto-scaling-그룹">AWS Auto Scaling 그룹</h2>
<hr>
<p><img src="/AWS/Auto_Scaling2.png" alt="Auto_Scaling"></p>
<ul>
<li>AWS Auto Scaling 그룹은 AWS에서 제공하는 <strong>자동 다중 서버 서비스</strong>를 의미한다.</li>
<li>즉, Auto Scaling 그룹은 같은 사양, 같은 환경, 같은 코드를 가지고 있는 같은 EC2 인스턴스들의 묶음을 의미하며, <strong>Auto Scaling은 인스턴스의 수를 자동으로 늘리고, 자동으로 줄일 수 있는 서비스</strong>를 의미한다.</li>
</ul>
<h1 id="heading"></h1>
<h1 id="heading-1"></h1>
<h2 id="aws-auto-scaling-그룹의-응용-예시"><strong>AWS Auto Scaling 그룹의 응용 예시</strong></h2>
<hr>
<ol>
<li>자원 사용량을 기준으로 한 자동 조정</li>
<li>시간을 기준으로한 자종 조정</li>
</ol>
    </div>
  </label>
</div>

</blockquote>
<hr>
<h1 id="heading"></h1>
<h2 id="시작-구성-launch-configuration-"><strong>시작 구성( Launch Configuration )</strong></h2>
<ul>
<li>Auto Scaling에서 새로운 인스턴스를 시작할 때 기반이 되는 구성</li>
<li>AMI ( Amazon Machine Image ), 인스턴스 유형, 보안그룹, 스토리지 등 EC2를 생성할 때와 마찬가지로 옵션을 구성할 수 있음</li>
<li>시작 구성은 한 번 생성시 수정이 불가능하며, 복사와 삭제만 가능</li>
<li>시작 구성을 변경하기 위해서는 기존의 시작구성을 새로운 시작 구성을 만드는 재료로 사용해야 함</li>
<li>하나의 ASG는 하나의 시작구성을 반드시 가짐</li>
</ul>
<hr>
<h1 id="heading-1"></h1>
<h2 id="조정-정책--scaling-"><strong>조정 정책 ( Scaling )</strong></h2>
<ul>
<li>최소, 목표, 최대 크기를 설정할 수 있고, 별다른 정책이 없을 경우 목표 크기를 유지하려 함</li>
<li>또한 3가지 동적 정책 사용 가능</li>
<li>대상 추적 정채: ASG의 지표 평균값을 목표로 인스턴스 수를 조절
<ul>
<li>평균 CPU 사용률, 네트워크 입/ 출력, 로드밸런서 요청 수</li>
</ul>
</li>
<li>단순 조정 정책: 지표의 임계치에 도달할 경우, 사용자가 정한 인스턴스 수를 늘리거나 감소시키는 정책</li>
<li>단계 조정 정책: 단순 조정 정책과 기본은 같지만, 지표 값에 따라 증감 수를 다르게 줄 수 있음 ( 즉 트리거가 여러 개 )</li>
</ul>
<hr>
<h1 id="heading-2"></h1>
<h2 id="조정-휴지--scaling-cooldown-"><strong>조정 휴지 ( Scaling Cooldown )</strong></h2>
<ul>
<li>시작 구성을 이용한 ASG 생성 시점을 포함혀여 인스턴스 생성 혹은 제거 후, 지표의 임계값을 넘더라도 인스턴스를 생성하지 않고 기다리는 시간</li>
<li>300초</li>
</ul>
<h1 id="heading-3"></h1>
<h2 id="수명주기-후크--life-cycle-hook-"><strong>수명주기 후크 ( Life Cycle Hook )</strong></h2>
<ul>
<li>Scale In / Out: In은 감소를, Out은 증가를 뜻함</li>
<li>지표의 임계값에 의해, Scale In/ Out 이 되고 나나 후 In service 상태에 돌입하기 전에 사용자가 정의한 작업을 수행하는 시간을 설정하는 기능</li>
<li>기본 3600초</li>
<li>즉 인스턴스 시작/ 종료시 사용자가 작업을 수행할 수 있음</li>
<li>이 시간동안 인스턴스에 설치 / 설정 등이 가능</li>
<li>가령, Cloudwatch를 사용하면 수명주기 작업이 발생시, Lamda 함수를 호출시키도록 설정 가능</li>
</ul>
<hr>
<h1 id="heading-4"></h1>
<h1 id="elastic-load-balancer--elb-"><strong>Elastic Load Balancer ( ELB )</strong></h1>
<hr>
<h1 id="heading-5"></h1>
<h2 id="elastic-load-balancer"><strong>Elastic Load Balancer</strong></h2>
<h1 id="heading-6"></h1>
<p><img src="/AWS/ELB/ELB.png" alt="ELB" /></p>
<h1 id="heading-7"></h1>
<ul>
<li>AWS의 L4/ L7 로드밸런싱 ( 서버 부하분산 ) 서비스</li>
<li>외부 혹은 내부에서 들어오는 클라이언트의 요청을 ELB에 연결된 가용역에 있는 EC2로 고르게 나누어 전달하고 등록된 EC들을 상태 검사하는 서비스</li>
<li>외부/ 내부 트래픿은 ELB의 DNS 주소를 목적지로 하여 들어오며 이 트래픽을 받은 ELB는 가용영역에 등록된 EC2로 전달</li>
<li>보안그룹 적용</li>
<li>ELB 또한 VPC 내 존재하며 공인 IP 혹은 공인/ 사설 IP를 모두 가질 수 있음</li>
<li>인터넷 연결 option: 공인/ 사설 IP 생성</li>
<li>내부 option: 사설 IP 생성</li>
<li>기본적으로 Port를 이용하여 로드밸런싱</li>
<li>‘리스너’를 거느리며 리스너 하나당 요청을 받아들이는 Port 하나 씩을 지정 ( 80 Prot 요청을 받아 들이는 리스너, 443 Port 요청을 받아들이는 리스터를 모두 등록 가능 )</li>
<li>상태 검사에 성공한 EC2만이 요청 전달 대상이 되며 상태 검사에 실패한 Ec2는 요청 전달 대상에 제외</li>
<li>상태 검사에 성공한 EC2만이 요청 전달 대상이 되며 상태 검사에 실패한 EC2는 요청 전달 대상에 제외</li>
<li>SSL 인증서를 등록하여 HTTPS 암호화/ 복호화 통신을 대신하는 ‘SSL OFFload’ 가능</li>
<li>ELB는 세 가지 로드밸런서로 구성 ( Application Load Balancer, Network Load Balancer, Classic Load Balancer )</li>
</ul>
<h1 id="heading-8"></h1>
<h3 id="target-group--대상-그룹-"><strong>Target Group ( 대상 그룹 )</strong></h3>
<ul>
<li>EBL에 등록된 EC2 인스턴스들의 그룹</li>
<li>대상 그룹에 등록된 EC2, EC2 상태, 상태 검사 방법 등을 정의</li>
<li>상태 검사 방법에는 HTTP, HTTPS, TCP 등이 있음</li>
<li>방법뿐만 아니라, 상태 검사에 필요한 시간도 정의 가능</li>
<li>ALB와 NLB는 대상그룹을 지정하며, CLB는 로드밸런서에 직접 등록</li>
</ul>
<h1 id="heading-9"></h1>
<h3 id="각-항목에-대한-설명"><strong>각 항목에 대한 설명</strong></h3>
<ul>
<li><strong>경로 :</strong> 인스턴스가 정상인지 확인하기 위해 호출할 URL 주소로, 인스턴스 내 해당주소로 응답을 줄 수 있게 구성되어야 한다.</li>
<li><strong>정상 임계 값 :</strong> 연속으로 몇 번 정상 응답을 해야만 정상 상태로 볼 것인지 지정하는 항목</li>
<li><strong>비정상 임계 값 :</strong> 연속으로 몇 번 비정상 응답을 해야만 정상 상태로 볼 것인지를 지정하는 항목</li>
<li><strong>간격 :</strong> 몇 초 간격으로 인스턴스의 상태를 물어볼지 지정하는 항목</li>
<li><strong>성공 코드 :</strong> 어떤 HTTP 응답 코드를 줬을 경우 정상 상태로 판달할 것인지를 지정하는 항목</li>
</ul>
<h1 id="heading-10"></h1>
<h3 id="elastic-load-balancer의-종류"><strong>Elastic Load Balancer의 종류</strong></h3>
<hr>
<h1 id="heading-11"></h1>
<h3 id="network-load-balancer--nlb-"><strong>Network Load Balancer ( NLB )</strong></h3>
<h1 id="heading-12"></h1>
<ul>
<li>
<p>AWS NLB는 AWS Load Balancer에 Elastic IP(고정)을 부여할 수 있는 현재까진 유일한 Load Balancer 이다.</p>
</li>
<li>
<p>TCP 레이어까지만 지원한다. 따라서 http cookie 방식의 sticky는 지원하지 않으며, tcp 세션을 350초 유지한다고 한다.</p>
</li>
<li>
<p>NLB의 장점은 클라이언트의 요청에 대해서 낮은 대기 시간으로 높은 처리가 가능하다.</p>
</li>
<li>
<p>따라서 기존 ELB 사용 시에는 짧은 시간 내 스파크성 트래픽 발생에 대한 대응이 어려웠으나 NLB를 사용함으로 ELB의 단점을 해소할 수 있을 것이다.</p>
</li>
<li>
<p>또한 이벤트 등으로 사이트의 유입이 늘어날 것을 대비해 ELB의 Prewarm을 준비하곤 했으나, NLB를 사용함으로 ELB의 단점을 해소할 수 있을 것이다.</p>
</li>
<li>
<p>NLB와 묶일 수 있는 대상은 아래와 같다.</p>
<ul>
<li>VPC 내의 EC2 인스턴스(Instance)</li>
<li>
<ol start="2">
<li>AWS 다른 대역의 리소스 혹은 VPN, DX로 터널링 된 Private IP 대역 (10.0.0.0/8, 100.64.0.0/10, 172.16.0.0/12, 192.168.0.0/16만 가능하다.)</li>
</ol>
</li>
</ul>
</li>
<li>
<p>client ip 와 serverip로 진입하는 트래픽은 LB를 통하고 나가는 트래픽은 Client 와 직접통신</p>
</li>
<li>
<p>security group 이 적용되지 않아 SG에서 보안가능</p>
</li>
<li>
<p>access 제한 가능</p>
</li>
<li>
<p>A record 사용가능</p>
</li>
<li>
<p>OSI4 계층의 tcp트래픽에 적합</p>
</li>
</ul>
<h1 id="heading-13"></h1>
<h3 id="application-load-balancer--alb-"><strong>Application Load Balancer ( ALB )</strong></h3>
<h1 id="heading-14"></h1>
<ul>
<li>L7 로드밸런서</li>
<li>HTTL/ HTTPS Header 정보를 기반으로 요청을 전달하는 로드밸런서 ( 즉 리스너가 HTTP/ HTTPS를 전문적으로 다름 )</li>
<li>요청에 따라 고정 페이지를 반환하거나 다른 경로로 리다이렉트</li>
<li>HTTP Header / HTTP 요청 메서드 / Host Header / Source IP 등을 이용하여 요청 전달 가능 ( 동 그룹의 대상에게만 전달 가능 )</li>
<li>SSL  인증서르 이용하여 SSL Offload 지원</li>
<li>후술할 교차영역 로드밸런싱 지원</li>
<li>X-forwared-for를 지원하여 EC2로 하여금 클라이언트의 IP를 확인할 수 있도록 함</li>
<li>ALB가 소유한 공인 IP가 유동적으로 변경됨</li>
</ul>
<h1 id="heading-15"></h1>
<h3 id="classic-load-balancer--clb-"><strong>Classic Load Balancer ( CLB )</strong></h3>
<h1 id="heading-16"></h1>
<ul>
<li>L4/ L7을 모두 지원하는 ‘과거의’ 로드밸런서</li>
<li>EC2-Classic을 사용하는 경우 CLB를 사용하면 됨</li>
<li>TCP / HTTP/ HTTPS( S니 )을 지원</li>
<li>X-forwared-for 지원</li>
<li>교차영역 로드밸런싱 지원</li>
</ul>
<h1 id="heading-17"></h1>
<h3 id="sticky-session"><strong>Sticky Session</strong></h3>
<ul>
<li>세션 고정 기능</li>
<li>하나의 요청이 특정 EC2로 들어와 세션이 생성되었다가 종료되고, 들어왔던 요청이 다시 들어올 경우 이미 연결되었던 특정 EC2로 전달하는 기능</li>
</ul>
<h1 id="heading-18"></h1>
<h3 id="교차영역-로드밸런싱"><strong>교차영역 로드밸런싱</strong></h3>
<ul>
<li>기본적으로 ELB는 대상그룹에 등록된 EC2별로 적절히 부하분산을 하는 것이 아닌 가용역역별로 비율을 나눔 ( 가용영역의 EC2의 부하가 심해짐 )</li>
<li>이를 방지하기 위해 교차영역 로드밸런싱을 활성화하면 가용역영익 아닌 EC2 개수를 기반으로 계산하여 전달하므로 부하가 고르게 나누어짐</li>
</ul>
<h1 id="heading-19"></h1>
<h3 id="x-forwared-for"><strong>X-Forwared-for</strong></h3>
<ul>
<li>Client의 IP를 담고 있는 HTTP Header</li>
<li>EC2 내 서비스가 Client의 IP를 확인할 필요가 있는 경우 ELB는 HTTP Header에 X-Forwared-for를 장착하여 전달</li>
</ul>
<h1 id="heading-20"></h1>
<h3 id="x-forwared-for-1"><strong>X-Forwared-for</strong></h3>
<ul>
<li>AutoSacling과 Elb를 함꼐 사용시 필요에 따라 EC2가 없어질 경우, 해당 EC2에 요청이 들어와있으면 사용중인 커넷션( 세션 )이 피해를 볼 수 있음</li>
<li>삭제되기 직전에 사용중인 커넥션(세션)이 작업을 마칠 때까지 기다리는 기능</li>
</ul>
<h1 id="heading-21"></h1>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside style="max-width: 14%;" class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#auto-scaling-1"><strong>Auto Scaling</strong></a></li>
  </ul>

  <ul>
    <li><a href="#시작-구성-launch-configuration-"><strong>시작 구성( Launch Configuration )</strong></a></li>
  </ul>

  <ul>
    <li><a href="#조정-정책--scaling-"><strong>조정 정책 ( Scaling )</strong></a></li>
  </ul>

  <ul>
    <li><a href="#조정-휴지--scaling-cooldown-"><strong>조정 휴지 ( Scaling Cooldown )</strong></a></li>
  </ul>

  <ul>
    <li><a href="#수명주기-후크--life-cycle-hook-"><strong>수명주기 후크 ( Life Cycle Hook )</strong></a></li>
  </ul>

  <ul>
    <li><a href="#elastic-load-balancer"><strong>Elastic Load Balancer</strong></a></li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#target-group--대상-그룹-"><strong>Target Group ( 대상 그룹 )</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#각-항목에-대한-설명"><strong>각 항목에 대한 설명</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#elastic-load-balancer의-종류"><strong>Elastic Load Balancer의 종류</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#network-load-balancer--nlb-"><strong>Network Load Balancer ( NLB )</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#application-load-balancer--alb-"><strong>Application Load Balancer ( ALB )</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#classic-load-balancer--clb-"><strong>Classic Load Balancer ( CLB )</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#sticky-session"><strong>Sticky Session</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#교차영역-로드밸런싱"><strong>교차영역 로드밸런싱</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#x-forwared-for"><strong>X-Forwared-for</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#x-forwared-for-1"><strong>X-Forwared-for</strong></a></li>
      </ul>
    </li>
  </ul>
</nav>


 
    </aside>
    
  </main>

  
</body>
</div>
</html>















