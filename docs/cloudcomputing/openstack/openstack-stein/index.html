<!DOCTYPE html>
<html lang="en">

<head>
  <script data-ad-client="ca-pub-1022327295984162" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Openstack Stain Manual 설치    1. 시스템 및 네트워크 구성   여기서는 Nat 네트워크를 외부, host1 대역을 내부로 사용하여 Openstack을 구축해보도록 하겠습니다.    운영체제 및 네트워크 구성  Hypervisor : Vmware Workstation 15 OS : CentOS7      노드 구성     OS Hostname Network Interface Network Interface2 CPU RAM DISK     CentOS7 controller Nat ( 192.168.10.100 ) HOST1 ( 10."><meta property="og:title" content="Openstack Stain Manual 설치" />
<meta property="og:description" content="Openstack Stain Manual 설치    1. 시스템 및 네트워크 구성   여기서는 Nat 네트워크를 외부, host1 대역을 내부로 사용하여 Openstack을 구축해보도록 하겠습니다.    운영체제 및 네트워크 구성  Hypervisor : Vmware Workstation 15 OS : CentOS7      노드 구성     OS Hostname Network Interface Network Interface2 CPU RAM DISK     CentOS7 controller Nat ( 192.168.10.100 ) HOST1 ( 10." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mung0001.github.io/docs/cloudcomputing/openstack/openstack-stein/" />


<title>뭉게뭉게</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.63eb88daa545365405ecdbb21033286a325c60a36cfa6d22d21e7c3bc9286941.css" integrity="sha256-Y&#43;uI2qVFNlQF7NuyEDMoajJcYKNs&#43;m0i0h58O8koaUE=">
<script defer src="/en.search.min.38a5742a4cb4a63926f28ef4773467e30a3abe29bcd56e3ac132203c21d4fcce.js" integrity="sha256-OKV0Kky0pjkm8o70dzRn4wo6vim81W46wTIgPCHU/M4="></script>
<!--

-->

  
</head>

<body>
  <div class="background">
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex" style="max-width:100%;" >
    <aside style="padding: 1.5%; max-width: 90%;" class="book-menu">
      
  
<nav styles="background-color:red; position=none;">
구름이 
<h2 class="book-brand">
  <a href="/"><span>뭉게뭉게</span>
  </a>
</h2>


<img style="padding-left: 3%; padding-right: 1%;"src = "https://github.com/mung0001/source/blob/master/static/Go/Golang.jpg?raw=true" width="90%" height="13%" >
<div style="padding-top: 0.2cm; font-size: 0.9em; font-weight: bolder;">
  <div style ="padding-bottom: 0.3cm;">
    Name : Jengkeun Lee
  </div>
  <div style ="padding-bottom: 0.3cm;">
    Mail : mung0001@naver.com
  </div>
  <div>
    Comment : 내 직장도 뭉게뭉게
  </div>
</div>

<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  

  
  




 
  
    




  
  <ul>
    
      
        

  <li class="book-section-flat" >
    

  
  <a href="/docs/cloudcomputing/" class="">CloudComputing</a>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/amazonwebservice/" class="collapsed ">Amazon Web Service</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/awstraining/" class="collapsed ">AWS Training</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/openstack/" class="collapsed ">OpenStack</a>
  


    




  
  <ul>
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/openstack/" class="">Openstack</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/keystone/" class="">Keystone</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/glance/" class="">Glance</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/nova/" class="">Nova</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/swift/" class="">Swift</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/neutron/" class="">Neutron</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/cinder/" class="">Cinder</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/horizon/" class="">Horizon</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/ceilometer/" class="">Ceilometer</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/heat/" class="">Heat</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/trove/" class="">Trove</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/sahara/" class="">Sahara</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/ironic/" class="">Ironic</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/service/" class="">Service</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/openstack-stein/" class="active">Openstack Stain Manual 설치</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/openstack-%EB%AA%85%EB%A0%B9%EC%96%B4/" class="">Openstack 명령어</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/openstack%EC%84%A4%EC%B9%98/" class="">Openstack설치</a>
  

</li>
      
    
      
        <li >

  
  <a href="/docs/cloudcomputing/openstack/%EA%B0%80%EC%83%81%ED%99%94/" class="">가상화</a>
  

</li>
      
    
  </ul>
  



  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloudcomputing/docker/" class="collapsed ">Docker</a>
  


    






  </li>


      
    
  </ul>
  



  </li>


      
    
      
        

  <li class="book-section-flat" >
    

  
  <a href="/docs/programing/" class="">Programing</a>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/programing/python/" class="collapsed ">Python</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/programing/golang/" class="collapsed ">Golang</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/programing/web/" class="collapsed ">Web</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/programing/git/" class="collapsed ">Git</a>
  


    






  </li>


      
    
  </ul>
  



  </li>


      
    
      
        

  <li class="book-section-flat" >
    

  
  <a href="/docs/network/" class="">Network</a>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/network/network/" class="collapsed ">Network 기본</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/network/%EC%A0%95%EB%A6%AC%EC%A0%84/" class="collapsed ">정리전</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/network/sophos/" class="collapsed ">Sophos</a>
  


    






  </li>


      
    
  </ul>
  



  </li>


      
    
      
        

  <li class="book-section-flat" >
    

  
  <a href="/docs/system/" class="">System</a>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/system/linux/" class="collapsed ">Linux</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/system/snort/" class="collapsed ">Snort</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/system/mail/" class="collapsed ">Mail</a>
  


    






  </li>


      
    
  </ul>
  



  </li>


      
    
      
        

  <li class="book-section-flat" >
    

  
  <span>Project</span>
  


    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/project/mini/" class="collapsed ">M Ini</a>
  


    






  </li>


      
    
  </ul>
  



  </li>


      
    
  </ul>
  



  














  
<ul>
  
  <li>
    <a href="/posts/" >
        Blog
      </a>
  </li>
  
</ul>







</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div style="padding-left: 2.5%;" class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Openstack Stain Manual 설치</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-시스템-및-네트워크-구성"><strong>1. 시스템 및 네트워크 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#2-openstack-기본-패키지-구성"><strong>2. Openstack 기본 패키지 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#3-keystone--인증-서비스--구성"><strong>3. Keystone ( 인증 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#4-glance--이미지-서비스--구성"><strong>4. Glance ( 이미지 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#5-nova--컴퓨트-서비스--구성"><strong>5. Nova ( 컴퓨트 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#6-neutron--네트워크-서비스--구성"><strong>6. Neutron ( 네트워크 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#6-2-테넌트-네트워크-환경-구축"><strong>6-2. 테넌트 네트워크 환경 구축</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#7-horizon--대시보드-서비스--구성"><strong>7. Horizon ( 대시보드 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#8-cinder--오브젝트-스토리지-및-블록-스토리지-구성-"><strong>8. Cinder ( 오브젝트 스토리지 및 블록 스토리지 구성 )</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#8-2-lvm으로-블록-스토리지-백엔드-구성"><strong>8-2. LVM으로 블록 스토리지 백엔드 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#8-3-lfs-lvm-기반-다중-스토리지-노드-구성"><strong>8-3. LFS, LVM 기반 다중 스토리지 노드 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#9-swift--오브젝트-스토리지-서비스--구성"><strong>9. Swift ( 오브젝트 스토리지 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#10-ssl--https--접속-가능한-오픈스택-대시보드-구성"><strong>10. SSL ( HTTPS ) 접속 가능한 오픈스택 대시보드 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#11-openstack-대시보드-메인-로고-및-링크-변경"><strong>11. Openstack 대시보드 메인 로고 및 링크 변경</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#12-neutron-기반-service-functon-chaining--sfc--기능-구성"><strong>12. Neutron 기반 Service Functon Chaining ( SFC ) 기능 구성</strong></a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="openstack-stain-manual-설치"><strong>Openstack Stain Manual 설치</strong></h1>
<hr>
<p> </p>
<h1 id="heading"></h1>
<h3 id="1-시스템-및-네트워크-구성"><strong>1. 시스템 및 네트워크 구성</strong></h3>
<hr>
<ul>
<li><strong>여기서는 Nat 네트워크를 외부, host1 대역을 내부로 사용하여 Openstack을 구축해보도록 하겠습니다.</strong></li>
</ul>
<h1 id="heading-1"></h1>
<ul>
<li><strong>운영체제 및 네트워크 구성</strong>
<ul>
<li><strong>Hypervisor : Vmware Workstation 15</strong></li>
<li><strong>OS : CentOS7</strong></li>
</ul>
</li>
</ul>
<h1 id="heading-2"></h1>
<ul>
<li><strong>노드 구성</strong></li>
</ul>
<table>
<thead>
<tr>
<th>OS</th>
<th>Hostname</th>
<th>Network Interface</th>
<th>Network Interface2</th>
<th>CPU</th>
<th>RAM</th>
<th>DISK</th>
</tr>
</thead>
<tbody>
<tr>
<td>CentOS7</td>
<td>controller</td>
<td>Nat ( 192.168.10.100 )</td>
<td>HOST1 ( 10.10.10.10 )</td>
<td>2cpu 4thread</td>
<td>8 RAm</td>
<td>30G</td>
</tr>
<tr>
<td>CentOS7</td>
<td>natwork</td>
<td>Nat ( 192.168.10.101 )</td>
<td>HOST1 ( 10.10.10.20 )</td>
<td>1cpu 2thread</td>
<td>2 RAm</td>
<td>20G</td>
</tr>
<tr>
<td>CentOS7</td>
<td>compute</td>
<td>Nat ( 192.168.10.102 )</td>
<td>HOST1 ( 10.10.10.30 )</td>
<td>1cpu 4thread</td>
<td>4 RAm</td>
<td>100G</td>
</tr>
</tbody>
</table>
<h1 id="heading-3"></h1>
<ul>
<li><strong>기본적인 업데이트 및 설정을 모든 노드에 진행합니다.</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ yum -y update
# 업데이트

$ vi /etc/hosts
10.10.10.10 controller
10.10.10.20 network
10.10.10.30 compute
# known host 등록
</code></pre></div><h1 id="heading-4"></h1>
<ul>
<li><strong>설정이 완료되면 기본 구성을 모든 노드에 진행합니다.</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ yum -y install chrony
# 시간 동기화를 위한 chrony 설치

$ vi /etc/chrony.conf

#server 0.centos.pool.ntp.org iburst
#server 1.centos.pool.ntp.org iburst
#server 2.centos.pool.ntp.org iburst
#server 3.centos.pool.ntp.org iburst
server ntp1.jst.mfeed.ad.jp iburst
server ntp2.jst.mfeed.ad.jp iburst
server ntp3.jst.mfeed.ad.jp iburst

allow 10.10.10.0/24
# 시간동기화

$ firewall-cmd --add-service=ntp --permanent
$ firewall-cmd --reload
# ntp 방화벽 허용 및 리로딩

$ init 6
# 시스템 재시작

$ chronyc sources
# 확인
</code></pre></div><h1 id="heading-5"></h1>
<p> </p>
<h1 id="heading-6"></h1>
<h3 id="2-openstack-기본-패키지-구성"><strong>2. Openstack 기본 패키지 구성</strong></h3>
<hr>
<ul>
<li><strong>Openstack의 기본 패키지 구성은 먼저 contorller 노드만을 통해 진행됨을 유의해주시길 바랍니다.</strong></li>
<li><strong>controller 노드에는 다음의 패키지가 설치됩니다.</strong>
<ul>
<li><strong>MariaDB: OpenStack 서비스 및 VM 관련 설정들을 보관하기 위해 사용</strong></li>
<li><strong>RabbitMQ: OpenStack 서비스 간 상호 메시지를 주고 받기 위하나 메시지 큐로 사용</strong></li>
<li><strong>Memcached: 범용 분산 메모리 캐시 시스템으로, 자주 외부 데이터에 접근해야 하는 경우에 발생하는 오버헤드를 줄이기 위해 메모리르르 캐싱하고 읽어들이는 역할을 담당, OpenStack 서비스에서는 주로 인증 메커니즘에서 토큰 캐싱을 위해 사용됩니다.</strong></li>
</ul>
</li>
</ul>
<h1 id="heading-7"></h1>
<ul>
<li><strong>Openstack 패키지 설치 및 레포지토리 구성</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ yum -y install centos-release-openstack-stein
$ sed -i -e &#34;s/enabled=1/enabled=0/g&#34; /etc/yum.repos.d/CentOS-OpenStack-stein.repo
# stein 패캐지를 등록합니다.
</code></pre></div><h1 id="heading-8"></h1>
<ul>
<li><strong>MariaDB를 설치합니다.</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ yum --enablerepo=centos-openstack-stein -y install mariadb-server
$ vi /etc/my.cnf
[mysqld]
character-set-server=utf8
# charset을 utf-8으로 변경합니다

$ systemctl start mariadb
$ systemctl enable mariadb
# mariadb을 시작 및 자동시작을 등록합니다.

$ mysql_secure-installation
# 패스워드 설정을 진행합니다.

$ firewall-cmd --add-service=mysql --permanent
$ firewall-cmd --reload
</code></pre></div><h1 id="heading-9"></h1>
<ul>
<li><strong>RabbitMQ 및 Memcached를 설치합니다.</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ yum --enablerepo=centos-openstack-stein -y install rabbitmq-server
$ yum --enablerepo=centos-openstack-stein -y install memcached

$ vi /etc/my.cnf.d/mariadb-server.cnf
[mysqld]
...
character-set-server=utf8
max_connections=500
# Mariadb의 위에 내용을 추가합니다.

$ vi /etc/sysconfig/memcached
OPTIONS=&#34;-l 0.0.0.0,::&#34;
# mamcached를 모든 리스닝 상태로 전환시킵니다.

$ systemctl restart mariadb rabbitmq-server memcached
$ systemctl enable restart mariadb rabbitmq-server memcached
# Mariadb와 함께 RabbitMQ 및 Memcached를 시작 및 자동시작을 등록합니다.

$ rabbitmqctl add_user [ id ] [ pw ]
# rabbitmq 유저를 생성합니다. 여기서는 openstack/qwer1234를 사용하도록 하겠습니다.

$ rabbitmqctl set_permissions [ id ] &#34;.*&#34; &#34;.*&#34; &#34;.*&#34;
# 생성한 사용자에게 모든 권한을 부여합니다.

$ firewall-cmd --add-prot=<span style="color:#75715e">{</span><span style="color:#ae81ff">11211</span><span style="color:#f92672">/</span><span style="color:#a6e22e">tcp</span><span style="color:#f92672">,</span><span style="color:#ae81ff">5672</span><span style="color:#f92672">/</span><span style="color:#a6e22e">tcp</span><span style="color:#75715e">}</span> --permanent
$ firewall-cmd --reload
</code></pre></div><h1 id="heading-10"></h1>
<p> </p>
<h1 id="heading-11"></h1>
<h3 id="3-keystone--인증-서비스--구성"><strong>3. Keystone ( 인증 서비스 ) 구성</strong></h3>
<hr>
<ul>
<li><strong>Keystone 또한 controller의 설치를 진행합니다.</strong></li>
<li><strong>keystone에 대한 설명은 <a href="">keystone</a>을 참조해주세요.</strong></li>
</ul>
<h1 id="heading-12"></h1>
<ul>
<li><strong>keyston DB 생성</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ mysql -u root -p
mysql&gt; create database keystone;
mysql&gt; grant all privileges on keystone.* to keystone@&#39;localhost&#39; identified by &#39;pw&#39;;
mysql&gt; grant all privileges on keystone.* to keystone@&#39;%&#39; identified by &#39;pw&#39;;
mysql&gt; flush privileges;
# keystone 구성을 위한 db를 생성합니다. ( 저는 편의를 위해 모든 pw로 qwer1234 설정하였습니다. )
</code></pre></div><h1 id="heading-13"></h1>
<ul>
<li><strong>keystone 패키지 설치 및 수정</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ yum --enablerepo=centos-openstack-stein,epel -y install openstack-keystone openstack-utils python-openstackclient httpd mod_wsgi
# keystone 및 관련 패키지를 설치합니다.

$ vi /etc/keystone/keystone.conf
[cache]
...
memcache_servers = controller:11211

[database]
...
connection = mysql+pymysql://keystone:qwer1234@controller/keystone

[token]
...
provider = fernet
# keystone 구성을 위해 설정파일 수정합니다.
# hosts에 등록한 IP 혹은 controller의 IP를 기입하셔도 무관합니다.

$ su -s /bin/bash keystone -c &#34;keystone-manage db_sync&#34;
# 설정 값을 토대로 db의 설정을 저정합니다.

$ keystone-manage fernet_setup --keystone-user keystone --keystone-group keystone
$ keystone-manage credential_setup --keystone-user ketstone --keystone-group keystone
# 토큰 및 자격 증명 암호화를 위해 사용되는 키 저장소를 생성합니다.

$ export controller=10.10.10.10
$ keystone-manage bootstrap --bootstrap-password qwer1234 \
--bootstrap-admin-url http://$controller:5000/v3/ \
--bootstrap-internal-url http://$controller:5000/v3/ \
--bootstrap-public-url http://$controller:5000/v3/ \
--bootstrap-region-id RegionOne
# controlelr의 IP로 keystone을 부트스트랩합니다.

$ setsebool -P httpd_use_openstack on
$ setsebool -P httpd_can_network_connect on
$ setsebool -P httpd_can_network_connect_db on
$ firewall-cmd --add-port=5000/tcp --permanent
$ firewall-cmd --reload
# Selinux와 방화벽으르 설정합니다.

$ ln -s /usr/share/keystone/wsgi-keystone.conf /etc/httpd/conf.d/
$ systemctl start httpd
$ systemctl enable httpd
# keystone 설정 활성화 및 httpd 를 시작합니다.
</code></pre></div><h1 id="heading-14"></h1>
<ul>
<li><strong>정상 동작 확인을 위한 토큰 파일 생성</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ vi ~/admin
export OS_PROJECT_DOMAIN_NAME=default
export OS_USER_DOMAIN_NAME=default
export OS_PROJECT_NAME=admin
export OS_USERNAME=admin
export OS_PASSWORD=qwer1234
export OS_AUTH_URL=http://controller:5000/v3
export OS_IDENTITY_API_VERSION=3
export OS_IMAGE_API_VERSION=2

$ chmod 600 ~/admin
$ source ~/admin
</code></pre></div><h1 id="heading-15"></h1>
<ul>
<li><strong>project 생성</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ cd ~
$ . admin

$ openstack project create --domain default --description &#34;Service Project&#34; service
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Service Project                  |
| domain_id   | default                          |
| enabled     | True                             |
| id          | 3f0b3ef5b8c94a0a9cca8e34ea2fdbd6 |
| is_domain   | False                            |
| name        | service                          |
| parent_id   | default                          |
| tags        | []                               |
+-------------+----------------------------------+
# project 생성

$ openstack project list
+----------------------------------+---------+
| ID                               | Name    |
+----------------------------------+---------+
| 3f0b3ef5b8c94a0a9cca8e34ea2fdbd6 | service |
| ec1a4336cfa64d04bbc8f908b26a6cda | admin   |
+----------------------------------+---------+
</code></pre></div><h1 id="heading-16"></h1>
<ul>
<li><strong>이것으로 keystone에 대한 설치가 끝났습니다.</strong></li>
<li><strong>혹시 오류가 발생할 경우 /var/log/keystone/ 혹은 /var/log/httpd/에서 error 로그, keystone 로그를 검색하여 오류를 찾아내시면 보다 쉽게 문제를 해결하실 수 있습니다.</strong></li>
</ul>
<h1 id="heading-17"></h1>
<p> </p>
<h1 id="heading-18"></h1>
<h3 id="4-glance--이미지-서비스--구성"><strong>4. Glance ( 이미지 서비스 ) 구성</strong></h3>
<hr>
<ul>
<li><strong>Glance 또한 controller에서만 설치를 진행합니다.</strong></li>
<li><strong>에 대한 설명은 <a href="">Glance</a>을 참조해주세요.</strong></li>
</ul>
<h1 id="heading-19"></h1>
<ul>
<li><strong>glance 사용자 추가</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ source ~/admin
# 전에 생성했던 토큰 값을 적용합니다.

$ openstack user create --domain default --project service --password qwer1234 glance
# glance 게정을 추가합니다.

$ openstack role add --project service --user glance admin
# glance에 admin의 권한을 부여합니다.

$ openstack service create --name glance --description &#34;OpenStack Image service&#34; image
# glance 서비스 엔트리를 생성합니다.

$ export controller=10.10.10.10
$ openstack endpoint create --region RegionOne image public http://$controller:9292
$ openstack endpoint create --region RegionOne image internal http://$controller:9292
$ openstack endpoint create --region RegionOne image admin http://$controller:9292
# glance 서비스의 endpoint를 추가합니다 ( public, internal, admin )

$ openstack user list
+----------------------------------+--------+
| ID                               | Name   |
+----------------------------------+--------+
| bd36365f2459468a9c480cb48bab3ac0 | glance |
| e19db9d5ec2c4c30b7a85d18b8b0e589 | admin  |
+----------------------------------+--------+

$ openstack endpoint list
+----------------------------------+-----------+--------------+--------------+---------+-----------+-----------------------------+
| ID                               | Region    | Service Name | Service Type | Enabled | Interface | URL                         |
+----------------------------------+-----------+--------------+--------------+---------+-----------+-----------------------------+
| 00b38774cef048ee9950eda6938accc3 | RegionOne | keystone     | identity     | True    | public    | http://10.10.10.10:5000/v3/ |
| 4591b06391374fe888380fa23b8f5121 | RegionOne | glance       | image        | True    | admin     | http://10.10.10.10:9292                |
| 53dd31fecf2d44949c141149a13c673b | RegionOne | keystone     | identity     | True    | admin     | http://10.10.10.10:5000/v3/ |
| 555f3d900f7e416bb783120f7ce74fe8 | RegionOne | glance       | image        | True    | internal  | http://10.10.10.10:9292                |
| 5b3ac620bb7d4d9aabdf0f33229ee346 | RegionOne | glance       | image        | True    | public    | http://10.10.10.10:9292                |
| bdd7df7c8cba46f6ada2c12155a9f1d6 | RegionOne | keystone     | identity     | True    | internal  | http://10.10.10.10:5000/v3/ |
+----------------------------------+-----------+--------------+--------------+---------+-----------+-----------------------------+

</code></pre></div><ul>
<li><strong>Glance DB 생성</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ mysql -u root -p
mysql&gt; create database glance;
mysql&gt; grant all privileges on glance.* to glance@&#39;localhost&#39; identified by &#39;pw&#39;;
mysql&gt; grant all privileges on glance.* to glance@&#39;%&#39; identified by &#39;pw&#39;;
mysql&gt; flush privileges;
#  구성을 위한 db를 생성합니다. ( 저는 편의를 위해 모든 pw로 qwer1234 설정하였습니다. )
</code></pre></div><h1 id="heading-20"></h1>
<ul>
<li><strong>glance 패키지 설치 및 수정</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ yum --enablerepo=centos-openstack-stein,epel -y install openstack-glance
# glance 패키지를 설치합니다.

$ vi /etc/glance/glance-api.conf
[DEFAULT]
bind_host = 0.0.0.0

[glance_store]
stores = file,http
default_store = file
filesystem_store_datadir = /var/lib/glance/images/ # 이미지 경로 지정

[database]  # database 연동
connection = mysql+pymysql://glance:qwer1234@controller/glance

[keystone_authtoken]  # keystone 인증
www_authenticate_uri = http://controller:5000
auth_url = http://controller:5000
memcached_servers = controller:11211
auth_type = password
project_domain_name = default
user_domain_name = default
project_name = service
username = glance
password = glance

[paste_deploy]
flavor = keystone
# glance.conf를 수정합니다.

$ su -s /bin/bash glance -c &#34;glance-manage db_sync&#34;
# glance db를 동기화 시킵니다.

$ systemctl start openstack-glance-api
$ systemctl enable openstack-glance-api
# glance를 시작 및 실행시 자동시작을 등록합니다.

$ setsebool -P glance_api_can_network on
$ firewall-cmd --add-port=9292/tcp --permaneㅜt
$ firewall-cmd --reload
# Selinux 및 firewall을 설정합니다.
</code></pre></div><h1 id="heading-21"></h1>
<ul>
<li><strong>확인을 위한 이미지 생성</strong></li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ wget http://download.cirros-cloud.net/0.5.1/cirros-0.5.1-x86_64-disk.img
# 확인을 위해 cirros 이미지를 다운 받습니다.

$ openstack image create &#34;Cirros&#34; --file cirros-0.5.1-x86_64-disk.img --disk-format qcow2
# image 등록

$ openstack image list
+--------------------------------------+--------+--------+
| ID                                   | Name   | Status |
+--------------------------------------+--------+--------+
| 38e15009-022b-49ce-bcdf-b220eb3c5b12 | Cirros | active |
+--------------------------------------+--------+--------+
# 확인
</code></pre></div><h1 id="heading-22"></h1>
<p> </p>
<h1 id="heading-23"></h1>
<h3 id="5-nova--컴퓨트-서비스--구성"><strong>5. Nova ( 컴퓨트 서비스 ) 구성</strong></h3>
<hr>
<ul>
<li>
<hr>
</li>
<li><strong>에 대한 설명은 <a href=""></a>을 참조해주세요.</strong></li>
</ul>
<h1 id="heading-24"></h1>
<ul>
<li>** DB 생성**</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ mysql -u root -p
mysql&gt; create database keystone;
mysql&gt; grant all privileges on .* to @&#39;localhost&#39; identified by &#39;pw&#39;;
mysql&gt; grant all privileges on .* to @&#39;%&#39; identified by &#39;pw&#39;;
mysql&gt; flush privileges;
#  구성을 위한 db를 생성합니다. ( 저는 편의를 위해 모든 pw로 qwer1234 설정하였습니다. )
</code></pre></div><h1 id="heading-25"></h1>
<p> </p>
<h1 id="heading-26"></h1>
<h3 id="6-neutron--네트워크-서비스--구성"><strong>6. Neutron ( 네트워크 서비스 ) 구성</strong></h3>
<hr>
<ul>
<li>
<hr>
</li>
<li><strong>에 대한 설명은 <a href=""></a>을 참조해주세요.</strong></li>
</ul>
<h1 id="heading-27"></h1>
<ul>
<li>** DB 생성**</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ mysql -u root -p
mysql&gt; create database keystone;
mysql&gt; grant all privileges on .* to @&#39;localhost&#39; identified by &#39;pw&#39;;
mysql&gt; grant all privileges on .* to @&#39;%&#39; identified by &#39;pw&#39;;
mysql&gt; flush privileges;
#  구성을 위한 db를 생성합니다. ( 저는 편의를 위해 모든 pw로 qwer1234 설정하였습니다. )
</code></pre></div><h1 id="heading-28"></h1>
<p> </p>
<h1 id="heading-29"></h1>
<h3 id="6-2-테넌트-네트워크-환경-구축"><strong>6-2. 테넌트 네트워크 환경 구축</strong></h3>
<h1 id="heading-30"></h1>
<p> </p>
<h1 id="heading-31"></h1>
<h3 id="7-horizon--대시보드-서비스--구성"><strong>7. Horizon ( 대시보드 서비스 ) 구성</strong></h3>
<hr>
<ul>
<li>
<hr>
</li>
<li><strong>에 대한 설명은 <a href=""></a>을 참조해주세요.</strong></li>
</ul>
<h1 id="heading-32"></h1>
<ul>
<li>** DB 생성**</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ mysql -u root -p
mysql&gt; create database keystone;
mysql&gt; grant all privileges on .* to @&#39;localhost&#39; identified by &#39;pw&#39;;
mysql&gt; grant all privileges on .* to @&#39;%&#39; identified by &#39;pw&#39;;
mysql&gt; flush privileges;
#  구성을 위한 db를 생성합니다. ( 저는 편의를 위해 모든 pw로 qwer1234 설정하였습니다. )
</code></pre></div><h1 id="heading-33"></h1>
<p> </p>
<h1 id="heading-34"></h1>
<h3 id="8-cinder--오브젝트-스토리지-및-블록-스토리지-구성-"><strong>8. Cinder ( 오브젝트 스토리지 및 블록 스토리지 구성 )</strong></h3>
<hr>
<ul>
<li>
<hr>
</li>
<li><strong>에 대한 설명은 <a href=""></a>을 참조해주세요.</strong></li>
</ul>
<h1 id="heading-35"></h1>
<ul>
<li>** DB 생성**</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ mysql -u root -p
mysql&gt; create database keystone;
mysql&gt; grant all privileges on .* to @&#39;localhost&#39; identified by &#39;pw&#39;;
mysql&gt; grant all privileges on .* to @&#39;%&#39; identified by &#39;pw&#39;;
mysql&gt; flush privileges;
#  구성을 위한 db를 생성합니다. ( 저는 편의를 위해 모든 pw로 qwer1234 설정하였습니다. )
</code></pre></div><h1 id="heading-36"></h1>
<p> </p>
<h1 id="heading-37"></h1>
<h3 id="8-2-lvm으로-블록-스토리지-백엔드-구성"><strong>8-2. LVM으로 블록 스토리지 백엔드 구성</strong></h3>
<h1 id="heading-38"></h1>
<p> </p>
<h1 id="heading-39"></h1>
<h3 id="8-3-lfs-lvm-기반-다중-스토리지-노드-구성"><strong>8-3. LFS, LVM 기반 다중 스토리지 노드 구성</strong></h3>
<h1 id="heading-40"></h1>
<p> </p>
<h1 id="heading-41"></h1>
<h3 id="9-swift--오브젝트-스토리지-서비스--구성"><strong>9. Swift ( 오브젝트 스토리지 서비스 ) 구성</strong></h3>
<hr>
<ul>
<li>
<hr>
</li>
<li><strong>에 대한 설명은 <a href=""></a>을 참조해주세요.</strong></li>
</ul>
<h1 id="heading-42"></h1>
<ul>
<li>** DB 생성**</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-tpl" data-lang="tpl">$ mysql -u root -p
mysql&gt; create database keystone;
mysql&gt; grant all privileges on .* to @&#39;localhost&#39; identified by &#39;pw&#39;;
mysql&gt; grant all privileges on .* to @&#39;%&#39; identified by &#39;pw&#39;;
mysql&gt; flush privileges;
#  구성을 위한 db를 생성합니다. ( 저는 편의를 위해 모든 pw로 qwer1234 설정하였습니다. )
</code></pre></div><h1 id="heading-43"></h1>
<p> </p>
<h1 id="heading-44"></h1>
<h3 id="10-ssl--https--접속-가능한-오픈스택-대시보드-구성"><strong>10. SSL ( HTTPS ) 접속 가능한 오픈스택 대시보드 구성</strong></h3>
<h1 id="heading-45"></h1>
<p> </p>
<h1 id="heading-46"></h1>
<h3 id="11-openstack-대시보드-메인-로고-및-링크-변경"><strong>11. Openstack 대시보드 메인 로고 및 링크 변경</strong></h3>
<h1 id="heading-47"></h1>
<p> </p>
<h1 id="heading-48"></h1>
<h3 id="12-neutron-기반-service-functon-chaining--sfc--기능-구성"><strong>12. Neutron 기반 Service Functon Chaining ( SFC ) 기능 구성</strong></h3>
<h1 id="heading-49"></h1>
<p> 
#</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex justify-between">





</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside style="max-width: 14%;" class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-시스템-및-네트워크-구성"><strong>1. 시스템 및 네트워크 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#2-openstack-기본-패키지-구성"><strong>2. Openstack 기본 패키지 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#3-keystone--인증-서비스--구성"><strong>3. Keystone ( 인증 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#4-glance--이미지-서비스--구성"><strong>4. Glance ( 이미지 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#5-nova--컴퓨트-서비스--구성"><strong>5. Nova ( 컴퓨트 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#6-neutron--네트워크-서비스--구성"><strong>6. Neutron ( 네트워크 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#6-2-테넌트-네트워크-환경-구축"><strong>6-2. 테넌트 네트워크 환경 구축</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#7-horizon--대시보드-서비스--구성"><strong>7. Horizon ( 대시보드 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#8-cinder--오브젝트-스토리지-및-블록-스토리지-구성-"><strong>8. Cinder ( 오브젝트 스토리지 및 블록 스토리지 구성 )</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#8-2-lvm으로-블록-스토리지-백엔드-구성"><strong>8-2. LVM으로 블록 스토리지 백엔드 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#8-3-lfs-lvm-기반-다중-스토리지-노드-구성"><strong>8-3. LFS, LVM 기반 다중 스토리지 노드 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#9-swift--오브젝트-스토리지-서비스--구성"><strong>9. Swift ( 오브젝트 스토리지 서비스 ) 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#10-ssl--https--접속-가능한-오픈스택-대시보드-구성"><strong>10. SSL ( HTTPS ) 접속 가능한 오픈스택 대시보드 구성</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#11-openstack-대시보드-메인-로고-및-링크-변경"><strong>11. Openstack 대시보드 메인 로고 및 링크 변경</strong></a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li>
      <ul>
        <li><a href="#12-neutron-기반-service-functon-chaining--sfc--기능-구성"><strong>12. Neutron 기반 Service Functon Chaining ( SFC ) 기능 구성</strong></a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>
</div>
</html>















